generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  email     String   @unique
  role      String
  createdAt DateTime @default(now())
}

model Make {
  id        Int       @id @default(autoincrement())
  name      String    @unique
  createdAt DateTime  @default(now())
  Model     Model[]
  Package   Package[]
  Car       Car[]
}

model Model {
  id        Int       @id @default(autoincrement())
  name      String    @unique
  make      Make      @relation(fields: [makeId], references: [id])
  makeId    Int
  createdAt DateTime  @default(now())
  Package   Package[]
  Car       Car[]
}

model Package {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  make      Make     @relation(fields: [makeId], references: [id])
  makeId    Int
  model     Model    @relation(fields: [modelId], references: [id])
  modelId   Int
  createdAt DateTime @default(now())
  Car       Car[]
}

model Car {
  id               Int      @id @default(autoincrement())
  make             Make     @relation(fields: [makeId], references: [id])
  makeId           Int
  model            Model    @relation(fields: [modelId], references: [id])
  modelId          Int
  package          Package? @relation(fields: [packageId], references: [id])
  packageId        Int?
  year             Int
  fuel             String
  mileage          Int
  color            String
  engineCC         Int
  transmissionType String
  driveType        String
  steeringPosition String
  location         String
  price            Int
  manufactureDate  DateTime
  registrationDate DateTime
  chassisCode      String
  status           String
  category         String
  createdAt        DateTime @default(now())
  image1           Bytes    @db.LongBlob
  image2           Bytes?   @db.LongBlob
  image3           Bytes?   @db.LongBlob
  image4           Bytes?   @db.LongBlob
  image5           Bytes?   @db.LongBlob
  leads            Lead[]
}

model Lead {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  phone     String
  message   String?
  contacted Boolean  @default(false)
  timestamp DateTime @default(now())
  country   String?
  address   String?
  city      String?
  car       Car?     @relation(fields: [carId], references: [id])
  carId     Int?
}
